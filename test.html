<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="./assets/css/components/toast.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="./assets/css/main.css">
    <link rel="stylesheet" href="./assets/css/components/input-warning.css">
    <link rel="stylesheet" href="./assets/css/common/dropdown.css">
    <style>
        .combo-box {
            width: 300px;
            margin: auto;
        }

        .combo-box .dropdown-text {
            border: none;
            width: 100%;
            height: 100%;
        }

        .combo-box .dropdown-text:focus {
            outline: none;
        }
    </style>
</head>

<body>
    <div class="toast toast--error">
        <i class="fa fa-exclamation-triangle toast__icon" aria-hidden="true"></i>
        <div class="toast__messenger">Nội dung đi kèm tiêu đề</div>
        <i class="fa fa-times toast__close-icon" aria-hidden="true"></i>
    </div>
    <br>
    <br>
    <br>
    <div class="input-warning">
        Định dạng không đúng
        <i class="fa fa-caret-down" aria-hidden="true"></i>
    </div>

    <div class="field-label combo-box">
        <div class="label">Vị trí</div>
        <div class="dropdown" tabindex="0">
            <input class="value dropdown-text" value="" />
            <i class="fa fa-caret-down icon-right" aria-hidden="true"></i>
            <div class="collapse">
                <div class="dropdown-item">Tất cả vị trí</div>
                <div class="dropdown-item">Tổng giám đốc</div>
                <div class="dropdown-item">Google</div>
                <div class="dropdown-item">Firefox</div>
                <div class="dropdown-item">Hiiiiiiiii</div>
                <div class="dropdown-item">Heloooooooo</div>
            </div>
        </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="./assets/js/dropdown.js"></script>
    <script>
        $(".dropdown .dropdown-item").click(function () {
            selectItem(this)
        });

        $(".dropdown input").on('input', function () {
            detectItemMatched()
        })

        $(".dropdown input").focus(function(){
            $(this).find('.collase').show()
        })

        function detectItemMatched() {
            let items = $(".dropdown .dropdown-item")
            let value = $(".dropdown .value").val()
            value = removeAccents(value)
            value = value.toLowerCase()
            $(items).each((each, item) => {
                let text = $(item).text()
                text = removeAccents(text)
                text = text.toLowerCase()
                if (text.includes(value)) {
                    $(item).show()
                } else {
                    $(item).hide()
                }
            })
        }

        function detectSelectDropdownItem() {
            let dropdown = $(".dropdown");
            for (let i = 0; i < dropdown.length; i++) {
                let value = $(dropdown[i]).find('.value');
                let items = $(dropdown[i]).find('.dropdown-item');
                for (let j = 0; j < items.length; j++) {
                    let item = items[j]
                    if ($(item).text() == $(value).text()) {
                        $(item).addClass('dropdown-item--selected')
                    } else {
                        $(item).removeClass('dropdown-item--selected')
                    }
                }

            }
        }

        function removeAccents(str) {
            var AccentsMap = [
                "aàảãáạăằẳẵắặâầẩẫấậ",
                "AÀẢÃÁẠĂẰẲẴẮẶÂẦẨẪẤẬ",
                "dđ", "DĐ",
                "eèẻẽéẹêềểễếệ",
                "EÈẺẼÉẸÊỀỂỄẾỆ",
                "iìỉĩíị",
                "IÌỈĨÍỊ",
                "oòỏõóọôồổỗốộơờởỡớợ",
                "OÒỎÕÓỌÔỒỔỖỐỘƠỜỞỠỚỢ",
                "uùủũúụưừửữứự",
                "UÙỦŨÚỤƯỪỬỮỨỰ",
                "yỳỷỹýỵ",
                "YỲỶỸÝỴ"
            ];
            for (var i = 0; i < AccentsMap.length; i++) {
                var re = new RegExp('[' + AccentsMap[i].substr(1) + ']', 'g');
                var char = AccentsMap[i][0];
                str = str.replace(re, char);
            }
            return str;
        }

        function selectItem(el) {
            let itemSelected = $(el).text();
            $(el).parent().parent().find('.value').val(itemSelected)
        }
    </script>
</body>

</html>